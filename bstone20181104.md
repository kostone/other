## 【C/C++】定数について

C/C++で定数を作りたい！と思ったとき、すぐに思い浮かぶ方法は次の3つのはず

- #define
- const
- enum

それぞれどのように使い分けるべきなのか？をさまざまな観点で考えてみます


### #define

#### まずは簡単な使用例

```
#define EFFORT_VALUE_MAX 252

main(){
  int var = EFFORT_VALUE_MAX;
  printf("%d\n",var);
}
```

これはコンパイル時点で下記のようになる
```
main(){
  int var = 252;
}
```

#### 特徴
-コンパイル前にプリプロセッサで展開される
  -コンパイル時にシンボルが生成されない（＝デバッグでものすごく不便）
  -メモリ上に配置されない
    -メモリ容量を圧迫しない
    -アドレスが存在しない（ポインタ演算不可）
  -C/C++の文法的に間違っててもお構いなし
  -スコープ？何それ美味しいの
  -意図しない演算順序になってしまう恐れあり

### const
※ポインタにconstを付ける場合等他の使い方については割愛します  
参考：http://starpentagon.net/life/2017/01/const/

#### 簡単な使用例

```
main(){
  const int var = 252;
  var = 510; // この行でエラーになる
  printf("%d\n",var);
}
```

#### 特徴
-「この変数は書き換え不可能」であることを示す修飾子
-この修飾子付きの変数に再代入しようとするとコンパイルエラーになる
-コンパイル時にシンボルが生成される（＝デバッグで定数名が使える）
-メモリ上に配置される
  -メモリ容量を食う
  -アドレスが存在する（ポインタ演算可能）
  -**読み取り専用のメモリ領域に配置されるわけではない**
    -つまり変数の値を書き換えようと思えば方法はある
    -このことから厳密に言えば定数ではなく「自分のことを定数だと思い込んでる変数」
-C/C++の文法チェックや型チェックをしてくれる
-配列定義時に要素数として使用できなかった（C99で使用できるように）

### enum
※ C++11で新しく"enum class"が登場していますがここでは従来のenumについてです

#### 簡単な使用例

```
main(){
  enum emax{
    eEFFORT_VALUE_MIN = 0;
    eEFFORT_VALUE_MAX = 255;
  };
  
  int var = eEFFORT_VALUE_MAX;
  printf("%d\n",var);
}
```

#### 特徴
